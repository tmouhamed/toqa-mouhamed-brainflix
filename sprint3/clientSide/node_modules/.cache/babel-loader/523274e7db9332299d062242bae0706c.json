{"ast":null,"code":"var _jsxFileName = \"/work/tmouhamed/brainstation/projects/toqa-mouhamed-brainflix/sprint3/clientSide/src/components/MainContent/MainContent.js\";\nimport React from 'react';\nimport Axios from 'axios';\nimport './MainContent.scss';\nimport Hero from '../Hero/Hero.js';\nimport MainVideo from '../MainVideo/MainVideo.js';\nimport Comment from '../Comments/Comment.js';\nimport SideVideo from '../SideVideo/SideVideo.js';\nimport Header from '../Header/Header';\n\nclass MainContent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.url = 'http://localhost:8080';\n    this.state = {\n      mainVideos: {\n        comments: []\n      },\n      sideVideos: []\n    };\n\n    this.getVideoList = () => {\n      Axios.get(\"\".concat(this.url, \"/videos/\")).then(response => {\n        this.setState({\n          sideVideos: response.data,\n          id: response.data[0].id\n        });\n      });\n    };\n\n    this.getMainVideo = id => {\n      if (id) {\n        Axios.get(\"\".concat(this.url, \"/videos/\").concat(id, \"/\")).then(response => {});\n      }\n    };\n\n    this.postVideo = id => {\n      Axios.post(\"\".concat(this.url, \"/videos/\").concat(id, \"/comments/\"), request).then(response => {\n        console.log(response);\n      });\n    };\n\n    this.submitHandler = data => {\n      const newRequest = {\n        \"title\": data.title,\n        \"description\": data.description\n      };\n      this.postVideo(data.id);\n    };\n  }\n\n  componentDidMount() {\n    this.getMainVideo('1af0jruup5gu');\n    this.getVideoList();\n    this.postVideo(this.props.match.params.id);\n  }\n\n  componentDidUpdate(prevProps) {\n    //to make the homepage only for the first video \n    if (this.props.match.params.id !== prevProps.match.params.id) {\n      this.getMainVideo(this.props.match.params.id);\n    }\n  }\n\n  render() {\n    if (!this.state.mainVideos) {\n      return null;\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"main\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(Hero, {\n      mainVideo: this.state.mainVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"section\", {\n      className: \"main__content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      className: \"main__content-article\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(MainVideo, {\n      mainVideo: this.state.mainVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(Comment, {\n      mainVideo: this.state.mainVideos,\n      formHandler: this.submitHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    })), React.createElement(SideVideo, {\n      sideVideo: this.state.sideVideos,\n      mainVideo: this.state.mainVideos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default MainContent;","map":{"version":3,"sources":["/work/tmouhamed/brainstation/projects/toqa-mouhamed-brainflix/sprint3/clientSide/src/components/MainContent/MainContent.js"],"names":["React","Axios","Hero","MainVideo","Comment","SideVideo","Header","MainContent","Component","url","state","mainVideos","comments","sideVideos","getVideoList","get","then","response","setState","data","id","getMainVideo","postVideo","post","request","console","log","submitHandler","newRequest","title","description","componentDidMount","props","match","params","componentDidUpdate","prevProps","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Axios from 'axios';\n\nimport './MainContent.scss';\nimport Hero from '../Hero/Hero.js';\nimport MainVideo from '../MainVideo/MainVideo.js';\nimport Comment from '../Comments/Comment.js';\nimport SideVideo from '../SideVideo/SideVideo.js';\nimport Header from '../Header/Header';\n\nclass MainContent extends React.Component {\n    url = 'http://localhost:8080';\n\n    state = {\n        mainVideos: { comments: [] },\n        sideVideos: [],\n    }\n\n    getVideoList = () => {\n        Axios.get(`${this.url}/videos/`)\n            .then(response => {\n                this.setState({\n                    sideVideos: response.data,\n                    id: response.data[0].id\n                })\n            })\n    }\n\n    getMainVideo = (id) => {\n        if (id) {\n            Axios.get(`${this.url}/videos/${id}/`)\n                .then(response => {\n                    \n                })\n\n        }\n    }\n    postVideo = (id) => {\n        Axios.post(`${this.url}/videos/${id}/comments/`, request)\n            .then(response => {\n                console.log(response);\n            })\n    }\n    submitHandler = (data) => {\n        const newRequest = {\n            \"title\": data.title,\n            \"description\": data.description\n        } \n        this.postVideo(data.id)\n    }\n    componentDidMount() {\n        this.getMainVideo('1af0jruup5gu');\n        this.getVideoList();\n        this.postVideo(this.props.match.params.id);\n    }\n\n    componentDidUpdate(prevProps) {\n        //to make the homepage only for the first video \n\n        if (this.props.match.params.id !== prevProps.match.params.id) {\n            this.getMainVideo(this.props.match.params.id);\n        }\n    }\n\n    render() {\n        if (!this.state.mainVideos) {\n            return null;\n        }\n        return (\n            <>\n                <Header />\n                <main className=\"main\">\n                    <Hero mainVideo={this.state.mainVideos} />\n                    <section className=\"main__content\">\n                        <article className=\"main__content-article\">\n                            <MainVideo mainVideo={this.state.mainVideos} />\n                            <Comment mainVideo={this.state.mainVideos} formHandler={this.submitHandler}/>\n                        </article>\n                        <SideVideo sideVideo={this.state.sideVideos} mainVideo={this.state.mainVideos} />\n                    </section>\n                </main>\n            </>\n        );\n\n    }\n}\nexport default MainContent;"]},"metadata":{},"sourceType":"module"}